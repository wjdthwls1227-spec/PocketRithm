# 포켓리즘 개발 단계별 계획

## 📋 전체 마일스톤

### 1-2주: MVP (핵심 기능)
### 3-4주: 자동 리포트 및 통계
### 4-6주: 자동 회고 및 고급 기능
### 6-8주: 챌린지 시스템 및 어드민

---

## 🚀 1-2주: MVP (핵심 기능)

### 1.1 인증 시스템
- [ ] Supabase Auth 설정
- [ ] 이메일 회원가입/로그인 페이지
- [ ] 소셜 로그인 (카카오, 구글) 연동
- [ ] 온보딩 플로우
  - [ ] 서비스 소개 슬라이드
  - [ ] 첫 지출 입력 연습
  - [ ] 월 목표 설정

### 1.2 지출 입력 (핵심 기능)
- [ ] 지출 입력 폼
  - [ ] 금액 (amount)
  - [ ] 카테고리 (category) - 자동완성
  - [ ] 날짜 (date)
  - [ ] 타입 선택 (desire/lack/need)
  - [ ] 감정 태그 (emotions) - 다중 선택
  - [ ] 지출 이유 메모 (reason)
- [ ] 지출 목록 페이지
- [ ] 필터 기능 (기간, 타입, 감정)
- [ ] 지출 수정/삭제

### 1.3 수입 입력
- [ ] 수입 입력 폼
  - [ ] 금액 (amount)
  - [ ] 수입원 (source)
  - [ ] 날짜 (date)
- [ ] 수입 목록 페이지

### 1.4 대시보드
- [ ] 오늘 지출 표시
- [ ] 이번 달 지출 / 예산 / 비율
- [ ] 욕망·결핍·필요 파이차트
- [ ] 회고 D-day 표시
- [ ] 추천 칼럼 섹션

### 1.5 월간 회고 (수동)
- [ ] 월간 회고 템플릿
- [ ] 회고 작성 페이지
- [ ] 회고 저장 및 조회

### 1.6 데이터베이스 스키마
- [ ] Supabase 프로젝트 생성
- [ ] 테이블 생성 (User, Expense, Income)
- [ ] RLS (Row Level Security) 정책 설정
- [ ] 인덱스 설정

---

## 📊 3-4주: 자동 리포트 및 통계

### 2.1 통계 페이지
- [ ] 월별 추이 차트 (6개월)
- [ ] 감정별 지출 차트
- [ ] 요일별 지출 차트
- [ ] 카테고리별 지출 차트
- [ ] 타입 변화 그래프 (욕망/결핍/필요)

### 2.2 일반 회고 시스템
- [ ] 회고 에디터 컴포넌트
  - [ ] 볼드/이탤릭
  - [ ] 색상 강조 (Color picker)
  - [ ] Heading (H1-H3)
  - [ ] Bullet / Number list
  - [ ] Divider
  - [ ] 이미지 업로드 (jpg/png/webp)
  - [ ] 텍스트 중간 삽입
- [ ] 4L 템플릿
- [ ] KPT 템플릿
- [ ] Free 템플릿
- [ ] Supabase Storage 연동
- [ ] 회고 목록 및 상세 페이지

### 2.3 수동 회고
- [ ] 주간 회고 페이지
  - [ ] 요약 섹션
  - [ ] 질문 3개
- [ ] 월간 회고 페이지
  - [ ] 리포트 섹션
  - [ ] 8문항 입력
- [ ] 회고 아카이브
  - [ ] 월별 정렬
  - [ ] 비교 기능

### 2.4 칼럼 시스템
- [ ] 칼럼 목록 페이지 (최신순/인기순)
- [ ] 칼럼 상세 페이지
  - [ ] 마크다운 렌더링
  - [ ] 태그 표시
  - [ ] 읽는 시간 표시
  - [ ] 관련 글 추천
- [ ] 어드민 CRUD (기본)

---

## 🤖 4-6주: 자동 회고 및 고급 기능

### 3.1 AI 인사이트 엔진
- [ ] AI API 연동 (OpenAI/Claude)
- [ ] 소비 패턴 분석 함수
- [ ] 감정-지출 상관 분석
- [ ] reason 텍스트 기반 패턴 분석
- [ ] 위험 지출 탐지
- [ ] 실험 제안 생성
- [ ] 월간/주간 비교 분석

### 3.2 주간 자동 가계부 회고
- [ ] 스케줄러 설정 (매주 월요일 10:00)
- [ ] 조건 체크 (최근 7일 중 ≥ 3일 기록)
- [ ] Expense 데이터 수집
- [ ] AI 회고 생성
  - [ ] 욕망/결핍/필요 요약
  - [ ] 반복 패턴 분석
  - [ ] 감정–지출 상관도
  - [ ] reason 패턴 분석
  - [ ] 잘한 점 3개
  - [ ] 개선 전략
  - [ ] 다음 주 실험 3개
  - [ ] 위험 지출 탐지
- [ ] 결과 저장 (WeeklyReflection)
- [ ] 알림 생성

### 3.3 월간 자동 회고
- [ ] 스케줄러 설정 (월말)
- [ ] 데이터 수집
  - [ ] 총 지출/수입
  - [ ] 타입 비율
  - [ ] 감정 패턴
  - [ ] Top 지출
  - [ ] 주별 추이
  - [ ] 지난달 대비 변화
- [ ] AI 회고 생성
  - [ ] 회고 8문항 자동 생성
  - [ ] 다음 달 실험 제안
- [ ] 결과 저장 (MonthlyReflection)

### 3.4 자동 4L 회고
- [ ] 스케줄러 설정 (매주 월요일 10:00)
- [ ] DailyLog 데이터 수집
- [ ] AI 4L 생성
  - [ ] Loved
  - [ ] Learned
  - [ ] Lacked
  - [ ] LongedFor
- [ ] 결과 저장 (Weekly4L)

### 3.5 CSV 기능
- [ ] CSV 업로드 페이지
- [ ] CSV 파싱 및 지출 자동 인식
- [ ] 데이터 검증 및 임포트
- [ ] CSV 내보내기 기능

### 3.6 결제 시스템
- [ ] 결제 서비스 연동 (토스페이먼츠/아임포트)
- [ ] 요금제 페이지
- [ ] Pro 플랜 결제 플로우
- [ ] Challenge 플랜 결제 플로우
- [ ] 구독 관리

---

## 🎯 6-8주: 챌린지 시스템 및 어드민

### 4.1 챌린지 시스템 (어드민)
- [ ] 어드민 대시보드
- [ ] 기수 생성 페이지
  - [ ] title, description
  - [ ] cohort number
  - [ ] startDate / endDate
  - [ ] location (optional)
  - [ ] capacity
  - [ ] fee (optional)
  - [ ] status 관리
- [ ] 참가자 관리
  - [ ] 출석 관리 (week index 배열)
  - [ ] 진행도 추적
  - [ ] 환급 여부 관리
- [ ] 기수 통계 대시보드

### 4.2 챌린지 시스템 (사용자)
- [ ] 기수 리스트 페이지
- [ ] 기수 상세 페이지
  - [ ] 일정 표시
  - [ ] 정원/현재 인원
  - [ ] 안내사항
- [ ] 참가 신청 플로우
- [ ] 나의 기수 페이지
  - [ ] 출석 현황
  - [ ] 기록일수
  - [ ] 공지사항
  - [ ] 과제 목록
  - [ ] 챌린지 게시판

### 4.3 게시판 기능
- [ ] 게시판 목록
- [ ] 게시글 작성/수정/삭제
- [ ] 댓글 기능
- [ ] 좋아요 기능

### 4.4 어드민 고도화
- [ ] 칼럼 관리 (CRUD)
- [ ] 사용자 관리
- [ ] 통계 대시보드
- [ ] 알림 관리

### 4.5 최적화 및 배포
- [ ] 성능 최적화
- [ ] SEO 최적화
- [ ] 에러 핸들링 강화
- [ ] 로깅 시스템
- [ ] 모니터링 설정
- [ ] 프로덕션 배포

---

## 📝 기술적 고려사항

### 데이터베이스
- Supabase PostgreSQL 사용
- RLS 정책으로 데이터 보안
- 적절한 인덱스 설정 (userId, date 등)

### 스케줄러
- Vercel Cron Jobs 또는 Supabase Edge Functions
- 실패 시 재시도 로직
- 로깅 및 모니터링

### AI 통합
- OpenAI API 또는 Claude API
- 프롬프트 엔지니어링
- 비용 최적화 (토큰 관리)

### 이미지 업로드
- Supabase Storage 사용
- 이미지 최적화 (리사이징)
- 파일 크기 제한

### 성능
- 데이터 페이징
- 무한 스크롤 또는 페이지네이션
- 캐싱 전략
- 이미지 lazy loading

---

## 🔐 보안 체크리스트

- [ ] RLS 정책 검토
- [ ] 입력 검증 (Zod 스키마)
- [ ] XSS 방지
- [ ] CSRF 방지
- [ ] 환경 변수 보안
- [ ] API Rate Limiting
- [ ] 파일 업로드 검증

---

## 📱 반응형 디자인

- [ ] 모바일 최적화
- [ ] 태블릿 레이아웃
- [ ] 데스크톱 레이아웃
- [ ] 접근성 (a11y) 고려

---

## 🧪 테스트 계획

- [ ] 단위 테스트 (유틸 함수)
- [ ] 통합 테스트 (API 라우트)
- [ ] E2E 테스트 (주요 플로우)
- [ ] 성능 테스트

---

## 📅 우선순위

### P0 (필수)
1. 인증 시스템
2. 지출 입력
3. 대시보드
4. 월간 회고 (수동)

### P1 (중요)
1. 통계 페이지
2. 일반 회고 시스템
3. 주간 자동 회고
4. 월간 자동 회고

### P2 (선택)
1. CSV 기능
2. 챌린지 시스템
3. 게시판
4. 고급 통계

---

## 📌 참고사항

- 각 단계마다 코드 리뷰 및 테스트 필수
- 사용자 피드백 수집 및 반영
- 점진적 배포 (Feature Flags 활용)
- 문서화 지속적 업데이트

